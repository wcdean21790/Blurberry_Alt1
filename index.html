<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Blurberry Price Storing</title>
    <link rel="stylesheet" href="css/styles.css">

    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth-compat.js"></script>
</head>
<body>
<div class="container">
    <h1 class="red-text">Blurberry Price Storing</h1>

    <form id="itemForm">
        <div>
            <label for="groupName">Group Name:</label><br>
            <input type="text" id="groupName" name="groupName" value="Public"> <!-- Autofill with "Public" -->
        </div>
        <div>
            <label for="itemName">Item Name:</label><br>
            <input type="text" id="itemName" name="itemName">
            <ul id="suggestions"></ul>
        </div>
        <div>
            <label for="Price">High Price:</label><br>
            <input type="text" id="Price" name="Price">
        </div>
    </form>

    <div class="button">
        <button id="nibButton">NIB</button>
        <button id="nisButton">NIS</button>
        <button id="inbButton">INB</button>
        <button id="insButton">INS</button>
    </div>

</div>
<script>
    const inputField = document.getElementById("itemName");
    const suggestionList = document.getElementById("suggestions");

    // Function to fetch and parse the JSON data from the URL
    async function fetchAndParseJSON(url) {
        try {
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const data = await response.json();
            return data;
        } catch (error) {
            console.error('Error fetching JSON:', error);
        }
    }

    // Function to handle user input and provide auto-suggestions
    function handleInput() {
        const userInput = inputField.value.toLowerCase();
        suggestionList.innerHTML = ""; // Clear previous suggestions

        // Fetch and parse JSON data
        async function fetchAndParseJSON(url) {
            try {
                const response = await fetch(`/proxy.php?url=${encodeURIComponent(url)}`);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching JSON:', error);
            }
        }

    }

    // Add event listener to the input field using the keyup event
    inputField.addEventListener("keyup", handleInput);

    // Call fetchAndParseJSON when the page loads
    window.onload = function () {
        fetchAndParseJSON("https://chisel.weirdgloop.org/gazproj/gazbot/rs_dump.json")
            .then(data => {
                // You can do additional processing if needed
                console.log("JSON data loaded:", data);
            });
    };
</script>
</body>
</html>
